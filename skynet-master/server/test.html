<!DOCTYPE html>
<!--[if IE 8]> <html class="no-js lt-ie9 ie8" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>SkyNet - Machine-to-machine instant messaging (M2M IM) open communications platform & API for the internet of things.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    
    <!-- LESS styles -->
    <!-- <link rel="stylesheet/less" type="text/css" href="css/less/custom.less" />
    <link rel="stylesheet/less" type="text/css" href="css/less/bootstrap/responsive.less" />  --> 

    <!-- Main styles -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/custom.css" >
    <link rel="stylesheet" href="css/responsive.css">

    <!-- Custom styles -->
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/jquery.bxslider.css">
    <link rel="stylesheet" href="css/animate.css">   

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!--[if gte IE 9]>
    <style type="text/css">
      .gradient {
         filter: none;
      }
    </style>
    <![endif]-->

    <!-- Web fonts -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
   <link rel="shortcut icon" href="ico/favicon.png">
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


  </head>

  <body>

    <div class="wrapper">

      <a name="demo"></a>
      <section id="demo" class="freelancer">
        <!-- <div class="helper"></div> -->
        <div class="hero-content">
            <a class="btn" style="margin-left: 8px;margin-top: 8px;" data-toggle="modal" data-target="#demoModal" onclick="startDemo(this)">Start Demo!</a>

          <!-- Modal -->
          <!-- <div class="modal fade" id="demoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title" id="myModalLabel">SkyNet Sensor Demo</h4>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div> -->

          <div class="modal-body">
            Registering virtual device with SkyNet...
            <div id="connect"></div>
            <br/>
            <div id="redirect"></div>
            <script>
            var index = 0;
            var text = '';

              function type(){
                if(text.charAt(index) == '|'){
                  document.getElementById('connect').innerHTML += '<br/>';
                } else {
                  document.getElementById('connect').innerHTML += text.charAt(index);
                }
                index += 1;
                var t = setTimeout('type()',100);
              }     

              function startDemo(){

                var skynetConfig = {} 
                var x=0;
                var y=0;   
                var oldx=0;
                var oldy=0;   
                skynet({appName:'skynetDemo'}, function (e, socket, device) {
                  if (e) throw e
                  console.log('REGISTERED', device);

                  text = '{|"uuid":"' + device.uuid + '",|"token": "' + device.token + '"|}';
                  type();
                  // $('#screen').append('{<br />"uuid":"' + device.uuid + '",<br />"token": "' + device.token + '"<br />}<br /><br />');
                  $('#redirect').html('Now, anyone or any device can subscribe to your skynet stream at:<br />');
                  $('#redirect').append('<a href="/demo/' + device.uuid + '/' + device.token + '" target="_new">http://localhost:3000/demo/' + device.uuid + '/' + device.token + '</a>');

                  // socket.on('message', function(channel, message){
                  //   console.log('message received', channel, message);
                  // });

                  $(document).ready(function(){
                    $(document).mousemove(function(e){
                      $('#spnCursor').html("X Axis : " + e.pageX + " Y Axis : " + e.pageY);
                      x=e.pageX;
                      y=e.pageY;
                    });

                    setInterval(function(){
                      // Send and receive messages
                      if(x != oldx ){
                        oldx = x;
                        oldy = y;
                        
                        socket.emit('message', {
                          "devices": device.uuid,
                          "message": {
                          "x": x, "y": y
                        }}, function(data){
                          console.log(data);
                        });  

                      }
                      
                    },300);   

                  });



                });

              }

            </script>  

            <p>Move your mouse to simulate a sensor!</p>
            <div id="spnCursor"></div>

          </div>


        </div>

      </section>


      <!-- <section id="websockets">
        <div class="container">

          <div class="page-header text-center">
            <h1>Realtime WebSocket API</h1>
          </div>

          <div class="row">

            <div class="col-md-12">
              <h2>
                SkyNet offers a realtime websocket API as well as a Node.JS NPM module to make event-driven IoT development fast and easy. 
                When nodes and devices register with SkyNet, they are assigned a unique id known as a UUID along with a security token. (Note: tokens can be provided by the request rather than having SkyNet assign one for you.)
              </h2>
              <h2>
                Upon connecting your node or device to SkyNet, you can query and update devices on the network and send machine-to-machine (M2M) messages in an RPC-style fashion.  
                Here are the basics for a socket.io implementation of using native websockets:
              </h2>
            </div>

            <pre>
var io = require('socket.io-client')
socket = io.connect('http://localhost:3000', {
    port: 80
});

socket.on('connect', function(){
  console.log('Requesting websocket connection to SkyNet');

  socket.on('identify', function(data){
    console.log('Websocket connecting to SkyNet with socket id: ' + data.socketid);
    console.log('Sending device uuid: ad698900-2546-11e3-87fb-c560cb0ca47b');
    socket.emit('identity', {uuid: 'ad698900-2546-11e3-87fb-c560cb0ca47b', socketid: data.socketid, token: 'zh4p7as90pt1q0k98fzvwmc9rmjkyb9'});
  });

  socket.on('notReady', function(data){
    if (data.status == 401){
      console.log('Device not authenticated with SkyNet');
    }
  });
  socket.on('ready', function(data){
    if (data.status == 201){
      console.log('Device authenticated with SkyNet');

      // Send/Receive messages
      socket.emit("message",{
        "devices": ["0d3a53...847b2cc", "11123...44567"],
        "message": {
          "red":"on"
        }
      });
      socket.on('message', function(channel, message){
        console.log('message received', channel, message);
      });

      // Test API calls
      socket.emit('whoami', {uuid: "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc"}, function(data){console.log(data);});            

    }
  });
});

            </pre>

            <h2>Websocket API commands include: status, register, unregister, update, whoami, devices, subscribe, unsubscribe, authenticate, and message. You can send a message to a specific UUID or an array of UUIDs or all nodes on SkyNet. </h2>

            <a name="npm"></a>
            <h1>Node.JS NPM Module</h1>
            <h2>SkyNet also offers a Node.JS NPM module for making event-driven IoT development fast and easy. This Node.JS module allows you to specify messaging protocol ("mqtt", "websocket"). If you select MQTT communications, you must specify your desired Quality of Service level ("qos") on the config as well as each message and subscription.  You can install the skynet module by running:</h2>
            <code>npm install skynet</code>
            
            <h2>Here's a kitchen-sink sample Node.JS app using the SkyNet NPM module:</h2>

            <pre>
var skynet = require('skynet');

var conn = skynet.createConnection({
  "uuid": "ad698900-2546-11e3-87fb-c560cb0ca47b",
  "token": "zh4p7as90pt1q0k98fzvwmc9rmjkyb9",
  "protocol": "mqtt", // or "websocket"
  "qos": 0, // MQTT Quality of Service (0=no confirmation, 1=confirmation, 2=N/A)
  "host": "localhost", // optional - defaults to http://localhost:3000
  "port": 3000  // optional - defaults to 80
});

conn.on('notReady', function(data){
  console.log('UUID FAILED AUTHENTICATION!');
  console.log(data);

  // Register a device
  conn.register({
    "type": "drone"
  }, function (data) {
    console.log(data); 

    // Login to SkyNet to fire onready event
    conn.authenticate({
      "uuid": data.uuid, 
      "token": data.token
    }, function (data) {
      console.log(data); 
    });

  });

});

conn.on('ready', function(data){
  console.log('UUID AUTHENTICATED!');
  console.log(data);

  // Send and receive messages
  conn.message({
    "devices": "*",
    "message": {
      "red":"on"
    },
    "qos": 0
  });

  // Subscribe to device/node i/o
  conn.subscribe({
    "uuid": "f828ef20-29f7-11e3-9604-b360d462c699",
    "token": "syep2lu2d0io1or305llz5u9ijrwwmi"
  }, function (data) {
    console.log(data); 
  });

  // Unsubscribe to device/node i/o
  conn.unsubscribe({
    "uuid": "f828ef20-29f7-11e3-9604-b360d462c699"
  }, function (data) {
    console.log(data); 
  });

  conn.on('message', function(channel, message){
    console.log('message received', channel, message);
  });


  // Event triggered when device loses connection to skynet
  conn.on('disconnect', function(data){
    console.log('disconnected from skynet');
  });

  // Register a device
  conn.register({
    // token is optional. skynet will assign one for your device uuid if not present
    "token": "zh4p7as90pt1q0k98fzvwmc9rmjkyb9", 
    "type": "drone"
  }, function (data) {
    console.log(data); 
  });

  // UnRegister a device
  conn.unregister({
    "uuid": "ad698900-2546-11e3-87fb-c560cb0ca47b", 
    "token": "zh4p7as90pt1q0k98fzvwmc9rmjkyb9"
  }, function (data) {
    console.log(data); 
  });

  // Update device
  conn.update({
    "uuid":"ad698900-2546-11e3-87fb-c560cb0ca47b", 
    "token": "zh4p7as90pt1q0k98fzvwmc9rmjkyb9", 
    "armed":true
  }, function (data) {
    console.log(data); 
  });

  // WhoAmI?
  conn.whoami({"uuid":"ad698900-2546-11e3-87fb-c560cb0ca47b"}, function (data) {
    console.log(data); 
  });

  // Receive an array of device UUIDs based on user defined search criteria
  conn.devices({
    "type":"drone"
  }, function (data) {
    console.log(data); 

    // Send hello world to the array of device uuids
    conn.message({
      "devices": data.devices,
      "message": {
        "hello":"world"
      },
      "qos": 0
    });

  });

  // SkyNet status
  conn.status(function (data) {
    console.log(data); 
  });

  // Receive last 10 device events
  conn.events({
    "uuid": "f828ef20-29f7-11e3-9604-b360d462c699",
    "token": "syep2lu2d0io1or305llz5u9ijrwwmi"
  }, function (data) {
    console.log(data); 
  });


});


            </pre>

            <h2>
              SkyNet automatically creates a websocket room for each connect device. This allows apps and other nodes and devices to connect and monitor events and commands. Note: UUID and Token are required to subscribe to device/node events.
              Here's a sample Node.JS device monitoring script:
            </h2>

            <pre>
script(src="http://code.jquery.com/jquery-1.10.1.min.js")
script(src="/socket.io/socket.io.js")
script.
  // Connect to SkyNet server & port
  var socket = io.connect('http://localhost:3000');

  // subscribe to uuid
  socket.emit('subscribe', {  
    "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
    "token": "qirqglm6yb1vpldixflopnux4phtcsor"
  }, function (data) {
    console.log(data);
  });

  // unsubscribe to uuid
  socket.emit('unsubscribe', {"uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc"}, function (data) {
    console.log(data);
  });

  socket.on('identify', function (data) {
    console.log(data);
    $(".activity").prepend(JSON.stringify(data) + '&lt;br /&gt;');
  });

  socket.on('message', function (channel, message) {
    console.log('message received', channel, message);
    $(".activity").prepend(JSON.stringify(message) + '&lt;br /&gt;');
  });

            </pre>


            <a name="javascript"></a>
            <h2>
              For your convenience, we also have a <a href="/js/skynet.js">skynet.js</a> javascript include file that you can use for client-side Web and/or mobile apps. Here are the basics:
            </h2>

            <pre>

&lt;html&gt;
&lt;head&gt;
  &lt;script src="http://localhost:3000/js/skynet.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    var skynetConfig = {
      "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
      "token": "qirqglm6yb1vpldixflopnux4phtcsor",
      "protocol": "websocket",
      "host": "localhost", // optional (defaults to "http://localhost:3000")
      "port": 3000 // optional (defaults to 80)
    }   
    skynet(skynetConfig, function (e, socket, device) {
    // skynet(function (e, socket, device) {
    // skynet({appName:'chris'}, function (e, socket, device) {
      if (e) throw e

      // Sample SkyNet API calls:
      socket.emit('status', function(data){
        console.log('status received');
        console.log(data);
      });   
      // Subscribe and unsubscribe to a device's messages and events
      socket.emit('subscribe', {
        "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
        "token": "qirqglm6yb1vpldixflopnux4phtcsor"
      }, function (data) {
        console.log(data); 
      });

      socket.emit('unsubscribe', {"uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc"}, function (data) {
        console.log(data);
      });  

      // Send and receive messages
      socket.emit('message', {
        "devices": "*",
        "message": {
        "skynet":"online"
      }}, function(data){
        console.log(data);
      }); 
      socket.on('message', function(channel, message){
        console.log('message received', channel, message);
      });


      // Get the status of the SkyNet network
      socket.emit('status', function(data){
        console.log('status received');
        console.log(data);
      });          

      // Register device
      socket.emit('register', {
        "type":"drone"
      }, function (data) {
        console.log(data); 
      });


      // Update device
      socket.emit('update', {
        "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
        "token": "qirqglm6yb1vpldixflopnux4phtcsor",
        "armed":true
      }, function (data) {
        console.log(data); 
      });

      // WhoAmI?
      socket.emit('whoami', {"uuid":"0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc"}, function (data) {
        console.log(data); 
      });      

      // Receive last 10 device events
      socket.emit('events', {
        "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
        "token": "qirqglm6yb1vpldixflopnux4phtcsor"
      }, function (data) {
        console.log(data); 
      });      

    });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  SkyNet client-side app
&lt;/body&gt;
&lt;/html&gt;

            </pre>

            <h2>
Note: There are three ways listed in the HTML example:
<br/>
1. The first option is used when you know the UUID and token of the device or node being connected to SkyNet
<br/>
<pre>
var skynetConfig = {
  "uuid": "0d3a53a0-2a0b-11e3-b09c-ff4de847b2cc",
  "token": "qirqglm6yb1vpldixflopnux4phtcsor"
}    
skynet(skynetConfig, function (e, socket, device) {
</pre>
<br/>
2. If you would like for SkyNet to automatically register a new UUID and token for you. This information will be returned in the device object.
<br/>
<pre>
skynet(function (e, socket, device) {
</pre>
<br/>
3. Similar to option two, SkyNet will automatically register your device/node but you can pass additional JSON elements to your device description. There are no reserved element names.
<br/>
<pre>
skynet({'appName':'chris', 'awesomeMeter':10}, function (e, socket, device) {
</pre>

            </h2>


          </div>



        </div>
      </section> -->

    </div>

    <!-- Placed at the end of the document so the pages load faster -->

    <script src="js/modernizr.custom.js"></script>
    <script src="js/bootstrap/bootstrap.js"></script>
    <script src="js/lte-ie7.js"></script> <!-- needed for icon fonts -->

    <script src="js/jquery.scrollTo.js"></script>
    <script src="js/jquery.nav.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.debouncedresize.js"></script>
    <script src="js/jquery.bxslider.min.js"></script>
    <script src="js/jquery.fitvids.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.smooth-scroll.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/skynet.js"></script>
    <!--<script src="js/less-1.3.3.min.js"></script>-->
    <script>
      var jiggle,
        _this = this;

      jiggle = function() {
        return _this.$(".assimilate").addClass("animated tada");
      };

      setTimeout(jiggle, 2000);
    </script>
    <script>
      $(document).ready(function(){
        // Target your .container, .wrapper, .post, etc.
        $(".featuredSlider").fitVids();
      });
    </script>    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2483685-29', 'localhost:3000');
      ga('send', 'pageview');

    </script>    
  
  </body>
</html>

